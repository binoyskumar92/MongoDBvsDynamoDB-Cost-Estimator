<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Atlas vs DynamoDB Cost Comparison</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="logic.js"></script>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="container">
        <h1>MongoDB Atlas vs DynamoDB Cost Comparison</h1>

        <div class="card">
            <h2>Configure Workload</h2>
            <div class="controls">
                <div class="control-group">
                    <label class="control-label">Read/Write Ratio: <span id="readRatioValue">70</span>% reads, <span
                            id="writeRatioValue">30</span>% writes</label>
                    <input type="range" id="readRatio" min="0" max="100" value="70" style="width: 100%;">
                </div>
                <div class="control-group">
                    <label class="control-label">Item Size: <span id="itemSizeValue">2</span>KB</label>
                    <input type="range" id="itemSize" min="1" max="10" value="2" style="width: 100%;">
                </div>
                <div class="control-group">
                    <label class="control-label">Data Usage: <span id="dataUsageValue">70</span>% of included
                        storage</label>
                    <input type="range" id="dataUsage" min="10" max="100" value="70" style="width: 100%;">
                </div>
                <div class="control-group">
                    <label class="control-label">Cluster Utilization: <span id="utilizationValue">50</span>% of peak
                        capacity</label>
                    <input type="range" id="utilization" min="10" max="100" value="50" style="width: 100%;">
                </div>
            </div>

            <div class="flex-grid">
                <div class="flex-grid-item">
                    <h3>MongoDB Atlas Options</h3>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="atlasSupportToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Include Support (70% premium, reduced to 37% with discount)</span>
                    </div>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="atlasDiscountToggle">
                            <span class="slider"></span>
                        </label>
                        <span>Apply 17% Enterprise Discount (Infra + 37% Support)</span>
                    </div>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="atlasContinuousBackupToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Include Continuous Backup </span>
                    </div>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="atlasSnapshotBackupToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Include Snapshot Backup(default policy)</span>
                    </div>
                </div>

                <div class="flex-grid-item">
                    <h3>DynamoDB Options</h3>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="dynamoSupportToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Include AWS Business Support (tiered pricing)</span>
                    </div>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="dynamoBackupToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Include Point-in-Time Recovery</span>
                    </div>
                    <div class="switch-container">
                        <label class="switch">
                            <input type="checkbox" id="dynamoSnapshotBackupToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Include On-Demand Backup</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Cost Comparison Chart</h2>
            <div class="chart-container">
                <canvas id="costChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h2>Detailed Cost Comparison</h2>
            <div style="overflow-x: auto;">
                <table id="costTable">
                    <thead>
                        <tr>
                            <th>Tier</th>
                            <th class="text-right">Operations/sec<br><small>(Peak / Effective)</small></th>
                            <th class="text-right">Included Storage</th>
                            <th class="text-right">Actual Data</th>
                            <th class="text-right">Atlas Total<br>(Monthly)</th>
                            <th class="text-right">DynamoDB Total<br>(Monthly)</th>
                            <th class="text-right">Atlas Total<br>(Yearly)</th>
                            <th class="text-right">DynamoDB Total<br>(Yearly)</th>
                            <th class="text-right">Cost Ratio</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Table rows will be generated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <div id="m30Details" class="info-box">
                <!-- M30 details will be inserted here -->
            </div>
        </div>

        <div class="card">
            <h2>Key Insights</h2>
            <ul>
                <li>MongoDB Atlas has a fixed monthly cost regardless of actual utilization.</li>
                <li>DynamoDB costs scale linearly with operation volume and actual utilization.</li>
                <li>The utilization factor is critical when comparing fixed-price vs. usage-based services.</li>
                <li>Most real-world workloads run at 30-70% average utilization of their peak capacity.</li>
                <li>Write operations account for most of DynamoDB costs (~75-80%) because they are 5x more expensive
                    than reads.</li>
                <li>AWS Business Support adds a tiered percentage cost based on your monthly AWS bill (10% for first
                    $10K, 7% for $10K-$80K, etc.).</li>
                <li>Atlas Support adds a percentage premium to the base cluster and backup costs (70% standard, 37% with
                    discount).</li>
                <li>Enterprise discounts of 17% can significantly reduce Atlas costs for large deployments.</li>
                <li><strong>Backup costs use different models:</strong> Atlas uses GB-days pricing with comprehensive retention, DynamoDB uses total backup storage size (AWS official 2.2x multiplier).</li>
                <li>Atlas includes more frequent backups (hourly) while DynamoDB uses a simpler total storage approach.</li>
                <li>DynamoDB becomes cost-effective at lower utilization levels (around 10-15% of equivalent Atlas tier
                    capacity).</li>
            </ul>

            <div class="flex-grid">
                <div class="flex-grid-item atlas-box">
                    <h3>Choose MongoDB Atlas when:</h3>
                    <ul>
                        <li>Your workload is consistent and predictable</li>
                        <li>You have high utilization (>30% of tier capacity)</li>
                        <li>You need complex query capabilities</li>
                        <li>Your document size varies significantly</li>
                        <li>You need more frequent backup snapshots (hourly)</li>
                        <li>You prefer GB-days pricing model for fine-grained backup control</li>
                    </ul>
                </div>

                <div class="flex-grid-item dynamo-box">
                    <h3>Choose DynamoDB when:</h3>
                    <ul>
                        <li>Your workload is highly variable or unpredictable</li>
                        <li>You have low utilization (<15% of equivalent Atlas tier)</li>
                        <li>Your access patterns are simple (key-value lookups)</li>
                        <li>You need serverless, automatic scaling</li>
                        <li>Daily backup snapshots are sufficient for your needs</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Understanding the Cost Calculation: Detailed Example</h2>

            <p>Let's break down exactly how the cost calculation works using the M30 tier as an example, including
                support and all backup costs:</p>

            <div class="math-example">
                <h3>Example: M30 Tier with 70% Reads / 30% Writes, 2KB Item Size, 70% Data Usage, and 50% Utilization
                </h3>

                <div class="math-step">
                    <strong>Step 1: MongoDB Atlas Base Cost</strong><br>
                    Base price: $394/month for M30 tier<br>
                    Annual base price: $394 × 12 = $4,728/year
                </div>

                <div class="math-step">
                    <strong>Step 2: Calculate Actual Data Size</strong><br>
                    M30 included storage: 40GB<br>
                    Data usage: 70%<br>
                    Actual data size: 40GB × 70% = 28GB
                </div>

                <div class="math-step">
                    <strong>Step 3: Atlas Backup Costs</strong><br>
                    <u>Continuous backup cost (tiered pricing):</u><br>
                    &nbsp;&nbsp;- Estimated oplog size: 28GB × 20% = 5.6GB<br>
                    &nbsp;&nbsp;- Combined snapshot + oplog size: 28GB + 5.6GB = 33.6GB<br>
                    &nbsp;&nbsp;- Tier 1 (0-5GB): 5GB × $0.00 = $0.00<br>
                    &nbsp;&nbsp;- Tier 2 (5-33.6GB): 28.6GB × $1.00 = $28.60<br>
                    &nbsp;&nbsp;- Total continuous backup cost: $28.60/month ($343.20/year)<br>
                    <u>Snapshot backup cost using GB-days pricing:</u><br>
                    &nbsp;&nbsp;- GB-day rate: ($0.14 × 12)/365 = $0.004602 per GB-day<br>
                    &nbsp;&nbsp;- Includes hourly (2 days), daily (7 days), weekly (28 days), monthly (365 days), yearly (365 days)<br>
                    &nbsp;&nbsp;- Total GB-days per month: ~27,043 GB-days for 28GB data<br>
                    &nbsp;&nbsp;- Monthly snapshot cost: 27,043 × $0.004602 = $124.45/month ($1,493.40/year)<br>
                    Base + Backup subtotal: $394 + $28.60 + $124.45 = <strong>$547.05/month ($6,564.60/year)</strong>
                </div>

                <div class="math-step">
                    <strong>Step 4: Atlas Support Cost</strong><br>
                    Support cost (calculated on base + backup): $547.05 × 70% = $382.94/month ($4,595.28/year)<br>
                    Total before discount: $547.05 + $382.94 = <strong>$929.99/month ($11,159.88/year)</strong>
                </div>

                <div class="math-step">
                    <strong>Step 5: Apply Enterprise Discount (if enabled)</strong><br>
                    When discount is enabled:<br>
                    - Support drops to 37%: $547.05 × 37% = $202.41/month ($2,428.92/year)<br>
                    - New subtotal = $547.05 + $202.41 = $749.46/month ($8,993.52/year)<br>
                    - Discount: 17% of $749.46 = $127.41/month ($1,528.92/year)<br>
                    - Final Atlas cost = $749.46 - $127.41 = <strong>$622.05/month ($7,464.60/year)</strong>
                </div>

                <div class="math-step">
                    <strong>Step 6: Calculate DynamoDB Snapshot Backup Cost (New Method)</strong><br>
                    <u>DynamoDB snapshot backup using GB-days pricing:</u><br>
                    &nbsp;&nbsp;- GB-day rate: ($0.10 × 12)/365 = $0.003288 per GB-day<br>
                    &nbsp;&nbsp;- Includes daily (7 days), weekly (28 days), monthly (365 days), yearly (365 days)<br>
                    &nbsp;&nbsp;- Total GB-days per month: ~20,323 GB-days for 28GB data<br>
                    &nbsp;&nbsp;- Monthly snapshot cost: 20,323 × $0.003288 = $66.82/month ($801.84/year)<br>
                    &nbsp;&nbsp;- PITR cost: 28GB × $0.20 = $5.60/month ($67.20/year)<br>
                    &nbsp;&nbsp;- Total DynamoDB backup cost: $66.82 + $5.60 = $72.42/month ($869.04/year)
                </div>

                <div class="math-step">
                    <strong>Step 7: Updated DynamoDB Total Cost</strong><br>
                    Base operations + storage: $1,679.07/month<br>
                    Support cost: $167.91/month<br>
                    Backup costs: $72.42/month<br>
                    <strong>Total DynamoDB cost: $1,919.40/month ($23,032.80/year)</strong>
                </div>

                <div class="math-result">
                    <strong>Final Comparison with Improved Backup Calculations:</strong><br>
                    MongoDB Atlas total: $622.05/month ($7,464.60/year) (with discount)<br>
                    DynamoDB total: $1,919.40/month ($23,032.80/year)<br>
                    <strong>Cost ratio:</strong> $1,919.40 ÷ $622.05 = 3.1x more expensive than Atlas
                </div>

                <div class="math-step" style="margin-top: 20px;">
                    <strong>Key Improvements in Backup Calculation:</strong><br>
                    - Both services now use comparable GB-days retention models<br>
                    - DynamoDB backup costs increased from ~$8.40 to $72.42/month (more realistic)<br>
                    - Atlas includes hourly snapshots; DynamoDB starts with daily for cost efficiency<br>
                    - Calculations now reflect actual enterprise backup policies and retention requirements
                </div>
            </div>

            <div class="info-box" style="margin-top: 20px;">
                <h3>Understanding the Updated Backup Cost Model</h3>
                <p>Both MongoDB Atlas and DynamoDB now use similar GB-days pricing models that better reflect real-world backup costs:</p>
                <ul>
                    <li><strong>MongoDB Atlas Snapshots:</strong> Include hourly (2 days), daily (7 days), weekly (28 days), monthly (365 days), and yearly (365 days) retention</li>
                    <li><strong>DynamoDB Snapshots:</strong> Include daily (7 days), weekly (28 days), monthly (365 days), and yearly (365 days) retention (no hourly for cost efficiency)</li>
                    <li><strong>GB-days calculation:</strong> Each snapshot size × retention days × frequency per month = total GB-days</li>
                    <li><strong>Realistic costs:</strong> The new model shows backup costs can be significant (10-20% of total cost) and should be factored into decision-making</li>
                </ul>
                <p>This updated model provides a more accurate comparison between the two services' backup strategies and associated costs.</p>
            </div>
        </div>
    </div>

    <script src="logic.js"></script>

</body>

</html>